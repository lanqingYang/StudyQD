<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>全选反选</title>
  </head>
  <style>
    * {
      padding: 0;
      margin: 0;
    }
    .warp {
      width: 400px;
      margin: 100px auto;
    }
    table {
      width: 400px;
      margin: 100px auto;
      text-align: center;
      border-collapse: collapse;
      font-size: 14px;
    }
    thead tr {
      height: 30px;
      background-color: skyblue;
    }
    tbody tr {
      height: 30px;
    }
    tbody td {
      border-bottom: 1px solid #d7d7d7;
      font-size: 12px;
      color: steelblue;
    }
  </style>
  <body>
    <div class="wrap">
      <table>
        <thead>
          <tr>
            <th>
              <input type="checkbox" id="all" />
            </th>
            <th>商品</th>
            <th>价钱</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>
              <input type="checkbox" />
            </td>
            <td>iphone8</td>
            <td>5000</td>
          </tr>
          <tr>
            <td>
              <input type="checkbox" />
            </td>
            <td>airports</td>
            <td>1000</td>
          </tr>
          <tr>
            <td>
              <input type="checkbox" />
            </td>
            <td>ipadaire</td>
            <td>4000</td>
          </tr>
        </tbody>
      </table>
    </div>
  </body>
  <!-- 分析： 
    .1 全选和取消全选： 让下面所有的复选框的checked属性 跟随 全选按钮 
    .2 复选框全部选中，全选才选中： 给下面所有复选框绑定点击事件，每次点击都循环查看下面所有的复选框是否有没选中的，若有，上面全选就不选中 
       设置一个变量来看是否选中
-->
  <script>
    var all = document.getElementById("all"); //全选按钮
    var goods = document.querySelector("tbody").getElementsByTagName("input");

    //注册全选事件
    all.onclick = function () {
      //this.checked 可以得到当前复选框的选中状态 返回true/false
      for (var i = 0; i < goods.length; i++) {
        goods[i].checked = this.checked;
      }
    };

    //2.复选框全部选中，全选才选中
    for (var i = 0; i < goods.length; i++) {
      goods[i].onclick = function () {
        //flag 控制全选按钮是否被选中
        var flag = true;
        //检查所有小按钮是否全部被选中
        for (var i = 0; i < goods.length; i++) {
          if (!goods[i].checked) {
            flag = false;
          }
        }
        all.checked = flag;
      };
    }
  </script>
</html>
